include ../../config.mk

LIB := libcommon.a

CPPINCLUDES = -I..
SOURCES = $(wildcard *.cc)
HEADERS = $(wildcard *.h)
OBJECTS = $(SOURCES:.cc=.o)

DEPS = $(SOURCES:.cc=.d)

all: $(LIB)

%.o: %.cc
	@echo "$(BOLD)$(GREEN)Compiling$(RESET) $<"
	$(SILENT)$(CXX) $(CXXFLAGS) $(CPPINCLUDES) -c $< -o $@

$(LIB): $(OBJECTS)
	@echo "$(BOLD)$(BLUE)Archiving$(RESET) $(LIB)"
	$(SILENT)$(AR) rcs $(LIB) $(OBJECTS)

clean:
	@echo "$(BOLD)Cleaning$(RESET)"
	$(SILENT)rm -f $(LIB) $(OBJECTS) $(DEPS)

# KEEP at the end so %.o rule doesn't overwrite the dependcy tracking
# rules generated by the compiler.
-include $(DEPS)

# :mode=Makefile:
