<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2119px" preserveAspectRatio="none" style="width:820px;height:2119px;" version="1.1" viewBox="0 0 820 2119" width="820px" zoomAndPan="magnify"><defs><filter height="300%" id="fz7l1uo3uacty" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="484" x="169" y="29.2419">Reading and Writing Camera Settings (Refined Workflow)</text><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="368.7662" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="242" y="140.2898"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="348.7662" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="242" y="540.762"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="217.9421" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="242" y="921.2342"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="327.0602" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="242" y="1170.8823"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="495.5902" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="242" y="1529.6485"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="504" y="171.9958"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="504" y="445.6439"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="504" y="572.468"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="504" y="635.88"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="504" y="762.7041"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="504" y="952.9402"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="504" y="1202.5883"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="504" y="1561.3545"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="504" y="1688.1786"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="504" y="1961.8267"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="95.118" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="593" y="277.1138"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="593" y="699.2921"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="593" y="826.1161"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="593" y="1016.3522"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="95.118" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="593" y="1266.0004"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="73.412" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="593" y="1392.8244"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="593" y="1624.7665"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="95.118" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="593" y="1793.2966"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="55" x2="55" y1="106.5838" y2="2043.2387"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="247" x2="247" y1="106.5838" y2="2043.2387"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="508.5" x2="508.5" y1="106.5838" y2="2043.2387"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="597.5" x2="597.5" y1="106.5838" y2="2043.2387"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="785" x2="785" y1="106.5838" y2="2043.2387"/><rect fill="#FEFECE" filter="url(#fz7l1uo3uacty)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="8" y="68.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="15" y="90.4818">Application</text><rect fill="#FEFECE" filter="url(#fz7l1uo3uacty)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="8" y="2042.2387"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="15" y="2064.2047">Application</text><rect fill="#FEFECE" filter="url(#fz7l1uo3uacty)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="191" y="68.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="198" y="90.4818">gphoto2cpp.h</text><rect fill="#FEFECE" filter="url(#fz7l1uo3uacty)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="191" y="2042.2387"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="198" y="2064.2047">gphoto2cpp.h</text><rect fill="#FEFECE" filter="url(#fz7l1uo3uacty)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="480.5" y="68.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="487.5" y="90.4818">cache</text><rect fill="#FEFECE" filter="url(#fz7l1uo3uacty)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="480.5" y="2042.2387"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="487.5" y="2064.2047">cache</text><rect fill="#FEFECE" filter="url(#fz7l1uo3uacty)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="552.5" y="68.5158"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="559.5" y="90.4818">libgphoto2</text><rect fill="#FEFECE" filter="url(#fz7l1uo3uacty)" height="33.0679" style="stroke: #A80036; stroke-width: 1.5;" width="87" x="552.5" y="2042.2387"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="73" x="559.5" y="2064.2047">libgphoto2</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="756" y="102.4818">Camera</text><path d="M767,51.5158 C767,41.5158 785,41.5158 785,41.5158 C785,41.5158 803,41.5158 803,51.5158 L803,77.5158 C803,87.5158 785,87.5158 785,87.5158 C785,87.5158 767,87.5158 767,77.5158 L767,51.5158 " fill="#FEFECE" filter="url(#fz7l1uo3uacty)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M767,51.5158 C767,61.5158 785,61.5158 785,61.5158 C785,61.5158 803,61.5158 803,51.5158 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="756" y="2057.2047">Camera</text><path d="M767,2071.3067 C767,2061.3067 785,2061.3067 785,2061.3067 C785,2061.3067 803,2061.3067 803,2071.3067 L803,2097.3067 C803,2107.3067 785,2107.3067 785,2107.3067 C785,2107.3067 767,2107.3067 767,2097.3067 L767,2071.3067 " fill="#FEFECE" filter="url(#fz7l1uo3uacty)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M767,2071.3067 C767,2081.3067 785,2081.3067 785,2081.3067 C785,2081.3067 803,2081.3067 803,2071.3067 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="368.7662" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="242" y="140.2898"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="348.7662" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="242" y="540.762"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="217.9421" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="242" y="921.2342"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="327.0602" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="242" y="1170.8823"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="495.5902" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="242" y="1529.6485"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="504" y="171.9958"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="504" y="445.6439"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="504" y="572.468"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="504" y="635.88"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="504" y="762.7041"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="504" y="952.9402"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="504" y="1202.5883"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="504" y="1561.3545"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="504" y="1688.1786"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="504" y="1961.8267"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="95.118" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="593" y="277.1138"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="593" y="699.2921"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="593" y="826.1161"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="593" y="1016.3522"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="95.118" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="593" y="1266.0004"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="73.412" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="593" y="1392.8244"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="31.706" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="593" y="1624.7665"/><rect fill="#FFFFFF" filter="url(#fz7l1uo3uacty)" height="95.118" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="593" y="1793.2966"/><polygon fill="#A80036" points="230,136.2898,240,140.2898,230,144.2898,234,140.2898" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="55" x2="236" y1="140.2898" y2="140.2898"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="62" y="134.4808">read_config()</text><polygon fill="#A80036" points="492,167.9958,502,171.9958,492,175.9958,496,171.9958" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="252" x2="498" y1="171.9958" y2="171.9958"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="259" y="166.1868">cache.get("root")</text><polygon fill="#A80036" points="263,199.7018,253,203.7018,263,207.7018,259,203.7018" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="257" x2="508" y1="203.7018" y2="203.7018"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="269" y="197.8928">nullptr (cache miss)</text><path d="M257,216.7018 L257,243.7018 L533,243.7018 L533,226.7018 L523,216.7018 L257,216.7018 " fill="#FBFB77" filter="url(#fz7l1uo3uacty)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M523,216.7018 L523,226.7018 L533,226.7018 L523,216.7018 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="255" x="263" y="235.5988">Cache is empty, must fetch from hardware.</text><polygon fill="#A80036" points="581,273.1138,591,277.1138,581,281.1138,585,277.1138" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="252" x2="587" y1="277.1138" y2="277.1138"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="259" y="271.3048">gp_camera_get_config()</text><polygon fill="#A80036" points="773,304.8199,783,308.8199,773,312.8199,777,308.8199" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="603" x2="779" y1="308.8199" y2="308.8199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="610" y="303.0109">Read all settings</text><polygon fill="#A80036" points="614,336.5259,604,340.5259,614,344.5259,610,340.5259" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="608" x2="784" y1="340.5259" y2="340.5259"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="620" y="334.7169">Current state</text><polygon fill="#A80036" points="263,368.2319,253,372.2319,263,376.2319,259,372.2319" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="257" x2="597" y1="372.2319" y2="372.2319"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="269" y="366.4229">new_root_widget_ptr</text><path d="M257,385.2319 L257,412.2319 L482,412.2319 L482,395.2319 L472,385.2319 L257,385.2319 " fill="#FBFB77" filter="url(#fz7l1uo3uacty)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M472,385.2319 L472,395.2319 L482,395.2319 L472,385.2319 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="204" x="263" y="404.1289">Got new root widget tree, cache it.</text><polygon fill="#A80036" points="492,441.6439,502,445.6439,492,449.6439,496,445.6439" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="252" x2="498" y1="445.6439" y2="445.6439"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="259" y="439.8349">cache.set("root", new_root_widget_ptr)</text><polygon fill="#A80036" points="263,473.3499,253,477.3499,263,481.3499,259,477.3499" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="257" x2="508" y1="477.3499" y2="477.3499"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="269" y="471.5409">Success</text><polygon fill="#A80036" points="66,505.056,56,509.056,66,513.056,62,509.056" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="60" x2="246" y1="509.056" y2="509.056"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="72" y="503.247">Success</text><polygon fill="#A80036" points="230,536.762,240,540.762,230,544.762,234,540.762" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="55" x2="236" y1="540.762" y2="540.762"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="62" y="534.953">read_property("iso")</text><polygon fill="#A80036" points="492,568.468,502,572.468,492,576.468,496,572.468" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="252" x2="498" y1="572.468" y2="572.468"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="259" y="566.659">cache.get("iso")</text><polygon fill="#A80036" points="263,600.174,253,604.174,263,608.174,259,604.174" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="257" x2="508" y1="604.174" y2="604.174"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="269" y="598.365">nullptr (cache miss)</text><polygon fill="#A80036" points="492,631.88,502,635.88,492,639.88,496,635.88" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="252" x2="498" y1="635.88" y2="635.88"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="259" y="630.071">cache.get("root")</text><polygon fill="#A80036" points="263,663.586,253,667.586,263,671.586,259,667.586" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="257" x2="508" y1="667.586" y2="667.586"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="269" y="661.777">root_widget_ptr</text><polygon fill="#A80036" points="581,695.2921,591,699.2921,581,703.2921,585,699.2921" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="252" x2="587" y1="699.2921" y2="699.2921"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="322" x="259" y="693.4831">gp_widget_get_child_by_name(root_widget_ptr, "iso")</text><polygon fill="#A80036" points="263,726.9981,253,730.9981,263,734.9981,259,730.9981" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="257" x2="597" y1="730.9981" y2="730.9981"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="269" y="725.1891">GP_OK</text><polygon fill="#A80036" points="492,758.7041,502,762.7041,492,766.7041,496,762.7041" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="252" x2="498" y1="762.7041" y2="762.7041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="259" y="756.8951">cache.add("iso", iso_child_ptr)</text><polygon fill="#A80036" points="263,790.4101,253,794.4101,263,798.4101,259,794.4101" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="257" x2="508" y1="794.4101" y2="794.4101"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="269" y="788.6011">success</text><polygon fill="#A80036" points="581,822.1161,591,826.1161,581,830.1161,585,826.1161" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="252" x2="587" y1="826.1161" y2="826.1161"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="259" y="820.3071">gp_widget_get_value(iso_child_ptr)</text><polygon fill="#A80036" points="263,853.8221,253,857.8221,263,861.8221,259,857.8221" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="257" x2="597" y1="857.8221" y2="857.8221"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="269" y="852.0131">"800"</text><polygon fill="#A80036" points="66,885.5282,56,889.5282,66,893.5282,62,889.5282" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="60" x2="246" y1="889.5282" y2="889.5282"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="72" y="883.7192">"800"</text><polygon fill="#A80036" points="230,917.2342,240,921.2342,230,925.2342,234,921.2342" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="55" x2="236" y1="921.2342" y2="921.2342"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="62" y="915.4252">write_property("iso", "1600")</text><polygon fill="#A80036" points="492,948.9402,502,952.9402,492,956.9402,496,952.9402" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="252" x2="498" y1="952.9402" y2="952.9402"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="259" y="947.1312">cache.get("iso")</text><polygon fill="#A80036" points="263,980.6462,253,984.6462,263,988.6462,259,984.6462" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="257" x2="508" y1="984.6462" y2="984.6462"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="269" y="978.8372">iso_child_ptr</text><polygon fill="#A80036" points="581,1012.3522,591,1016.3522,581,1020.3522,585,1016.3522" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="252" x2="587" y1="1016.3522" y2="1016.3522"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="259" y="1010.5432">gp_widget_set_value(iso_child_ptr, "1600")</text><polygon fill="#A80036" points="263,1044.0582,253,1048.0582,263,1052.0582,259,1048.0582" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="257" x2="597" y1="1048.0582" y2="1048.0582"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="269" y="1042.2492">GP_OK</text><path d="M257,1061.0582 L257,1106.0582 L502,1106.0582 L502,1071.0582 L492,1061.0582 L257,1061.0582 " fill="#FBFB77" filter="url(#fz7l1uo3uacty)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M492,1061.0582 L492,1071.0582 L502,1071.0582 L492,1061.0582 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="263" y="1079.9553">Value updated in local memory only.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="263" y="1097.6613">libgphoto2 marks widget as changed.</text><polygon fill="#A80036" points="66,1135.1763,56,1139.1763,66,1143.1763,62,1139.1763" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="60" x2="246" y1="1139.1763" y2="1139.1763"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="72" y="1133.3673">Success (local change OK)</text><polygon fill="#A80036" points="230,1166.8823,240,1170.8823,230,1174.8823,234,1170.8823" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="55" x2="236" y1="1170.8823" y2="1170.8823"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="62" y="1165.0733">write_config()</text><polygon fill="#A80036" points="492,1198.5883,502,1202.5883,492,1206.5883,496,1202.5883" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="252" x2="498" y1="1202.5883" y2="1202.5883"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="259" y="1196.7793">cache.get("root")</text><polygon fill="#A80036" points="263,1230.2943,253,1234.2943,263,1238.2943,259,1234.2943" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="257" x2="508" y1="1234.2943" y2="1234.2943"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="269" y="1228.4853">root_widget_ptr</text><polygon fill="#A80036" points="581,1262.0004,591,1266.0004,581,1270.0004,585,1266.0004" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="252" x2="587" y1="1266.0004" y2="1266.0004"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="238" x="259" y="1260.1914">gp_camera_set_config(root_widget_ptr)</text><polygon fill="#A80036" points="773,1293.7064,783,1297.7064,773,1301.7064,777,1297.7064" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="603" x2="779" y1="1297.7064" y2="1297.7064"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="610" y="1291.8974">Write all settings from tree</text><polygon fill="#A80036" points="614,1325.4124,604,1329.4124,614,1333.4124,610,1329.4124" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="608" x2="784" y1="1329.4124" y2="1329.4124"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="620" y="1323.6034">OK</text><polygon fill="#A80036" points="263,1357.1184,253,1361.1184,263,1365.1184,259,1361.1184" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="257" x2="597" y1="1361.1184" y2="1361.1184"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="269" y="1355.3094">GP_OK</text><polygon fill="#A80036" points="581,1388.8244,591,1392.8244,581,1396.8244,585,1392.8244" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="252" x2="587" y1="1392.8244" y2="1392.8244"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="292" x="259" y="1387.0154">gp_widget_set_changed(root_widget_ptr, FALSE)</text><path d="M257,1405.8244 L257,1432.8244 L524,1432.8244 L524,1415.8244 L514,1405.8244 L257,1405.8244 " fill="#FBFB77" filter="url(#fz7l1uo3uacty)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M514,1405.8244 L514,1415.8244 L524,1415.8244 L514,1405.8244 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="263" y="1424.7214">Reset changed flag after successful apply.</text><polygon fill="#A80036" points="263,1462.2365,253,1466.2365,263,1470.2365,259,1466.2365" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="257" x2="597" y1="1466.2365" y2="1466.2365"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="269" y="1460.4275">GP_OK</text><polygon fill="#A80036" points="66,1493.9425,56,1497.9425,66,1501.9425,62,1497.9425" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="60" x2="246" y1="1497.9425" y2="1497.9425"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="72" y="1492.1335">Success</text><polygon fill="#A80036" points="230,1525.6485,240,1529.6485,230,1533.6485,234,1529.6485" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="55" x2="236" y1="1529.6485" y2="1529.6485"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="62" y="1523.8395">read_config()</text><polygon fill="#A80036" points="492,1557.3545,502,1561.3545,492,1565.3545,496,1561.3545" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="252" x2="498" y1="1561.3545" y2="1561.3545"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="259" y="1555.5455">cache.get("root")</text><polygon fill="#A80036" points="263,1589.0605,253,1593.0605,263,1597.0605,259,1593.0605" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="257" x2="508" y1="1593.0605" y2="1593.0605"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="269" y="1587.2515">old_root_widget_ptr</text><polygon fill="#A80036" points="581,1620.7665,591,1624.7665,581,1628.7665,585,1624.7665" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="252" x2="587" y1="1624.7665" y2="1624.7665"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="222" x="259" y="1618.9575">gp_widget_free(old_root_widget_ptr)</text><polygon fill="#A80036" points="263,1652.4726,253,1656.4726,263,1660.4726,259,1656.4726" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="257" x2="597" y1="1656.4726" y2="1656.4726"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="269" y="1650.6636">void return</text><polygon fill="#A80036" points="492,1684.1786,502,1688.1786,492,1692.1786,496,1688.1786" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="252" x2="498" y1="1688.1786" y2="1688.1786"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="259" y="1682.3696">clear()</text><polygon fill="#A80036" points="263,1715.8846,253,1719.8846,263,1723.8846,259,1719.8846" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="257" x2="508" y1="1719.8846" y2="1719.8846"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="269" y="1714.0756">success</text><path d="M257,1732.8846 L257,1759.8846 L486,1759.8846 L486,1742.8846 L476,1732.8846 L257,1732.8846 " fill="#FBFB77" filter="url(#fz7l1uo3uacty)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M476,1732.8846 L476,1742.8846 L486,1742.8846 L476,1732.8846 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="263" y="1751.7816">Now we re-fetch like the first time...</text><polygon fill="#A80036" points="581,1789.2966,591,1793.2966,581,1797.2966,585,1793.2966" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="252" x2="587" y1="1793.2966" y2="1793.2966"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="259" y="1787.4876">gp_camera_get_config()</text><polygon fill="#A80036" points="773,1821.0026,783,1825.0026,773,1829.0026,777,1825.0026" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="603" x2="779" y1="1825.0026" y2="1825.0026"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="610" y="1819.1936">Read all settings</text><polygon fill="#A80036" points="614,1852.7087,604,1856.7087,614,1860.7087,610,1856.7087" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="608" x2="784" y1="1856.7087" y2="1856.7087"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="79" x="620" y="1850.8997">Current state</text><polygon fill="#A80036" points="263,1884.4147,253,1888.4147,263,1892.4147,259,1888.4147" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="257" x2="597" y1="1888.4147" y2="1888.4147"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="269" y="1882.6057">new_root_widget_ptr</text><path d="M257,1901.4147 L257,1928.4147 L428,1928.4147 L428,1911.4147 L418,1901.4147 L257,1901.4147 " fill="#FBFB77" filter="url(#fz7l1uo3uacty)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M418,1901.4147 L418,1911.4147 L428,1911.4147 L418,1901.4147 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="263" y="1920.3117">Got new root widget tree</text><polygon fill="#A80036" points="492,1957.8267,502,1961.8267,492,1965.8267,496,1961.8267" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="252" x2="498" y1="1961.8267" y2="1961.8267"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="259" y="1956.0177">cache.set("root", new_root_widget_ptr)</text><polygon fill="#A80036" points="263,1989.5327,253,1993.5327,263,1997.5327,259,1993.5327" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="257" x2="508" y1="1993.5327" y2="1993.5327"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="269" y="1987.7237">Success</text><polygon fill="#A80036" points="66,2021.2387,56,2025.2387,66,2029.2387,62,2025.2387" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="60" x2="246" y1="2025.2387" y2="2025.2387"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="72" y="2019.4297">Success</text><!--MD5=[f052ab554145a225fbea8edbbc9ed53e]
@startuml

title Reading and Writing Camera Settings (Refined Workflow)

participant "Application" as App
participant "gphoto2cpp.h" as Wrapper
participant "cache" as Cache
participant "libgphoto2" as GP2
database "Camera" as HW

App -> Wrapper: read_config()
activate Wrapper
Wrapper -> Cache: cache.get("root")
activate Cache
Cache - -> Wrapper: nullptr (cache miss)
deactivate Cache
note right of Wrapper: Cache is empty, must fetch from hardware.

Wrapper -> GP2: gp_camera_get_config()
activate GP2
GP2 -> HW: Read all settings
HW - -> GP2: Current state
GP2 - -> Wrapper: new_root_widget_ptr
deactivate GP2
note right of Wrapper: Got new root widget tree, cache it.
Wrapper -> Cache: cache.set("root", new_root_widget_ptr)
activate Cache
Cache - -> Wrapper: Success
deactivate Cache

Wrapper - -> App: Success
deactivate Wrapper

App -> Wrapper: read_property("iso")
activate Wrapper
Wrapper -> Cache: cache.get("iso")
activate Cache
Cache - -> Wrapper: nullptr (cache miss)
deactivate Cache
Wrapper -> Cache: cache.get("root")
activate Cache
Cache - -> Wrapper: root_widget_ptr
deactivate Cache
Wrapper -> GP2: gp_widget_get_child_by_name(root_widget_ptr, "iso")
activate GP2
GP2 - -> Wrapper: GP_OK
deactivate GP2
Wrapper -> Cache: cache.add("iso", iso_child_ptr)
activate Cache
Cache - -> Wrapper: success
deactivate Cache
Wrapper -> GP2: gp_widget_get_value(iso_child_ptr)
activate GP2
GP2 - -> Wrapper: "800"
deactivate GP2
Wrapper - -> App: "800"
deactivate Wrapper

App -> Wrapper: write_property("iso", "1600")
activate Wrapper
Wrapper -> Cache: cache.get("iso")
activate Cache
Cache - -> Wrapper: iso_child_ptr
deactivate Cache
Wrapper -> GP2: gp_widget_set_value(iso_child_ptr, "1600")
activate GP2
GP2 - -> Wrapper: GP_OK
note right of Wrapper: Value updated in local memory only.\nlibgphoto2 marks widget as changed.
deactivate GP2
Wrapper - -> App: Success (local change OK)
deactivate Wrapper

App -> Wrapper: write_config()
activate Wrapper
Wrapper -> Cache: cache.get("root")
activate Cache
Cache - -> Wrapper: root_widget_ptr
deactivate Cache
Wrapper -> GP2: gp_camera_set_config(root_widget_ptr)
activate GP2
GP2 -> HW: Write all settings from tree
HW - -> GP2: OK
GP2 - -> Wrapper: GP_OK
deactivate GP2
Wrapper -> GP2: gp_widget_set_changed(root_widget_ptr, FALSE)
activate GP2
note right of Wrapper: Reset changed flag after successful apply.
GP2 - -> Wrapper: GP_OK
deactivate GP2
Wrapper - -> App: Success
deactivate Wrapper

App -> Wrapper: read_config()
activate Wrapper
Wrapper -> Cache: cache.get("root")
activate Cache
Cache - -> Wrapper: old_root_widget_ptr
deactivate Cache
Wrapper -> GP2: gp_widget_free(old_root_widget_ptr)
activate GP2
GP2 - -> Wrapper: void return
deactivate GP2
Wrapper -> Cache: clear()
activate Cache
Cache - -> Wrapper: success
deactivate Cache
note right of Wrapper: Now we re-fetch like the first time...
Wrapper -> GP2: gp_camera_get_config()
activate GP2
GP2 -> HW: Read all settings
HW - -> GP2: Current state
GP2 - -> Wrapper: new_root_widget_ptr
deactivate GP2
note right of Wrapper: Got new root widget tree
Wrapper -> Cache: cache.set("root", new_root_widget_ptr)
activate Cache
Cache - -> Wrapper: Success
deactivate Cache
Wrapper - -> App: Success

deactivate Wrapper

@enduml

PlantUML version 1.2020.02(Sun Mar 01 02:22:07 PST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.7+6-Ubuntu-0ubuntu124.04
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>